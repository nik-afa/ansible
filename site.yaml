- name: Apply os-common role for PROD hosts
  remote_user: ubuntu
  become: true
  become_user: root
  hosts: prod
  roles:
    - os_common

- name: Apply Wireguard role
  remote_user: ubuntu
  become: true
  become_user: root
  hosts: wireguard
  roles:
    - wireguard
  vars:
    server_privkey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          00000000000000000000000000000000000000000000000000000000000000000000000000000000
          00000000000000000000000000000000000000000000000000000000000000000000000000000000
          00000000000000000000000000000000000000000000000000000000000000000000000000000000
          00000000000000000000000000000000000000000000000000000000000000000000000000000000
          00000000000000000000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000
    server_pubkey: 0000000000000000000000000000000000000000000000000000=
    users:
      - user1
      - user2
